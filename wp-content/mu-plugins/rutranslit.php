<?php

    namespace Rutranslit;

    /**
     * @param $title
     *
     * @return string
     */
    function rutranslit($title)
    {
        if (seems_utf8($title)) {
            $title = urldecode($title);
        }
        $title = preg_replace('/\.+/', '.', $title);

        return strtr($title, ruTranslitChars());
    }

    add_filter('sanitize_file_name', __NAMESPACE__ . '\\rutranslit');
    add_filter('sanitize_title', __NAMESPACE__ . '\\rutranslit');
    /**
     * @return array
     */
    function ruTranslitChars()
    {

        $chars = [
             	'æ'=> 'a',
             	'å'=> 'a',
             	'á'=> 'a',
             	'ä'=> 'a',
             	'č'=> 'c',
             	'ď'=> 'd',
             	'è'=> 'e',
             	'é'=> 'e',
             	'ě'=> 'e',
             	'ë'=> 'e',
             	'í'=> 'i',
             	'ĺ'=> 'l',
             	'ľ'=> 'l',
             	'ň'=> 'n',
             	'ø'=> 'o',
             	'ó'=> 'o',
             	'ô'=> 'o',
             	'ő'=> 'o',
             	'ö'=> 'o',
             	'ŕ'=> 'r',
             	'š'=> 's',
             	'ť'=> 't',
             	'ú'=> 'u',
             	'ů'=> 'u',
             	'ű'=> 'u',
             	'ü'=> 'u',
             	'ý'=> 'y',
             	'ř'=> 'r',
             	'ž'=> 'z',
             	' '=> '_',
             	'\''=> '',
             	'?'=> '',
             	'/'=> '',
             	'\\'=> '',
             	'.'=> '',
             	','=> '',
             	'>'=> '',
             	'<'=> '',
             	'"'=> '',
             	'['=> '',
             	']'=> '',
             	'|'=> '',
             	'{'=> '',
             	'}'=> '',
             	'('=> '',
             	')'=> '',
             	'А' => 'a',
             	'Б' => 'b',
             	'В' => 'v',
             	'Г' => 'g',
             	'Д' => 'd',
             	'Е' => 'e',
             	'Ё' => 'yo',
             	'Ж' => 'zh',
             	'З' => 'z',
             	'И' => 'i',
             	'Й' => 'y',
             	'К' => 'k',
             	'Л' => 'l',
             	'М' => 'm',
             	'Н' => 'n',
             	'О' => 'o',
             	'П' => 'p',
             	'Р' => 'r',
             	'С' => 's',
             	'Т' => 't',
             	'У' => 'u',
             	'Ф' => 'f',
             	'Х' => 'kh',
             	'Ц' => 'c',
             	'Ч' => 'ch',
             	'Ш' => 'sh',
             	'Щ' => 'shh',
             	'Ъ' => '',
             	'Ы' => 'y',
             	'Ь' => '',
             	'Э' => 'ye',
             	'Ю' => 'yu',
             	'Я' => 'ya',
             	'а' => 'a',
             	'б' => 'b',
             	'в' => 'v',
             	'г' => 'g',
             	'д' => 'd',
             	'е' => 'e',
             	'ё' => 'yo',
             	'ж' => 'zh',
             	'з' => 'z',
             	'и' => 'i',
             	'й' => 'y',
             	'к' => 'k',
             	'л' => 'l',
             	'м' => 'm',
             	'н' => 'n',
             	'о' => 'o',
             	'п' => 'p',
             	'р' => 'r',
             	'с' => 's',
             	'т' => 't',
             	'у' => 'u',
             	'ф' => 'f',
             	'х' => 'kh',
             	'ц' => 'c',
             	'ч' => 'ch',
             	'ш' => 'sh',
             	'щ' => 'shh',
             	'ъ' => '',
             	'ы' => 'y',
             	'ь' => '',
             	'э' => 'ye',
             	'ю' => 'yu',
             	'я' => 'ya',
             	'№' => '',
             	'—' => '-',
             	'…' => '',
             	'!' => '',
             	'@' => '',
             	'#' => '',
             	'$' => '',
             	'%' => '',
             	'^' => '',
             	'&' => '',
             	'Ї' => 'yi',
             	'ї' => 'i',
             	'Ґ' => 'g',
             	'ґ' => 'g',
             	'Є' => 'ye',
             	'є' => 'ie',
             	'І' => 'i',
             	'і' => 'i',
             	'’' => '_',
             	'Ә' => 'a',
             	'Ғ' => 'g',
             	'Қ' => 'k',
             	'Ң' => 'n',
             	'Ө' => 'o',
             	'Ұ' => 'u',
             	'Ү' => 'u',
             	'H' => 'h',
             	'ә' => 'a',
             	'ғ' => 'g',
             	'қ' => 'k',
             	'ң' => 'n',
             	'ө' => 'o',
             	'ұ' => 'u',
             	'h' => 'h'
        ];

        return $chars;
    }